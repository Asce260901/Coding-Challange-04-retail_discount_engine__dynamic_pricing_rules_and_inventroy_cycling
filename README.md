Reatil discount engine, dynamic pricing rules and inventory cycling code